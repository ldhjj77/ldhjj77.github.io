<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Tag: XGBoost - Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hexo"><meta name="msapplication-TileImage" content="/img/diablo.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hexo"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="https://ldhjj77.github.io/"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://ldhjj77.github.io/img/og_image.png"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ldhjj77.github.io"},"headline":"Hexo","image":["https://ldhjj77.github.io/img/og_image.png"],"author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"https://ldhjj77.github.io/img/diablo.jpg"}},"description":""}</script><link rel="icon" href="/img/diablo.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/diablo.jpg" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">홈</a><a class="navbar-item" href="/archives">아카이브</a><a class="navbar-item" href="/categories">카테고리</a><a class="navbar-item" href="/tags">테그</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">XGBoost</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-07-09T07:55:00.000Z" title="2021. 7. 9. 오후 4:55:00">2021-07-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-02T05:22:50.905Z" title="2021. 8. 2. 오후 2:22:50">2021-08-02</time></span><span class="level-item"><a class="link-muted" href="/categories/%ED%8F%AC%ED%8A%B8%ED%8F%B4%EB%A6%AC%EC%98%A4/">포트폴리오</a></span><span class="level-item">an hour read (About 9979 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/07/09/project_md/%EC%BD%94%EB%93%9C/P001_%EC%BC%80%EA%B8%80_%ED%83%80%EC%9D%B4%ED%83%80%EB%8B%89_%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_%EC%BD%94%EB%93%9C%ED%95%B4%EC%84%9D/">kaggle | 타이타닉으로 알아보는 Keras vs LightGBM vs CatBoost vs XGBoost 차이점 및 코드해석</a></h1><div class="content"><p>인용글 - <a target="_blank" rel="noopener" href="https://www.kaggle.com/ajalnine/titanic-keras-vs-lightgbm-vs-catboost-vs-xgboost">https://www.kaggle.com/ajalnine/titanic-keras-vs-lightgbm-vs-catboost-vs-xgboost</a><br>위 사이트에 가입후 우측상단에 Edit My Copy를 누르면 코드가 복사되고<br>필요한 부분에 대한 결과값을 출력해 볼수 있음</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> *		<span class="comment"># C 표준에서 정의된 수학 함수</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd     <span class="comment"># 오픈소스 데이터 분석 및 조작 도구</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np      <span class="comment"># 행렬이나 일반적으로 대규모 다차원 배열을 쉽게 처리 할 수 있도록 지원하는 파이썬의 라이브러리</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf		<span class="comment"># ML 모델을 개발하고 학습시키는 데 도움이 되는 핵심 오픈소스 라이브러리</span></span><br><span class="line"><span class="keyword">import</span> warnings			<span class="comment"># 경고 메시지를 출력하고 걸러내는 모듈</span></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score		<span class="comment"># 하위 집합의 정확도를 계산</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, StratifiedKFold</span><br><span class="line"><span class="comment"># train_test_split - 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line"><span class="comment"># StratifiedKFold - 계층화 된 K- 폴드 교차 검증 자</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> Imputer, StandardScaler</span><br><span class="line"><span class="comment"># Imputer - 결 측값 완성을위한 대치 변환기</span></span><br><span class="line"><span class="comment"># StandardScaler - 평균을 제거하고 단위 분산에 맞게 조정하여 기능 표준화</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt	<span class="comment"># 대화 형 플롯과 간단한 프로그래밍 플롯 생성 </span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> gridspec	<span class="comment"># 영역을 내마음대로 나누고 싶을 때 사용</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> keras    <span class="comment"># 딥러닝 프레임워크</span></span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="comment"># 각 레이어에 정확히 하나의 입력 텐서와 하나의 출력 텐서가 있는 일반 레이어 스택에 적합한 모델</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense, Dropout, BatchNormalization, Activation</span><br><span class="line"><span class="comment"># Dense - 입력과 출력을 모두 연결해주며, 입력과 출력을 각각 연결해주는 가중치를 포함하고 있음</span></span><br><span class="line"><span class="comment"># Dropout - Dropout은 딥러닝 학습에 있어서의 문제중 하나인 Overfitting을 해소하기 위해 사용</span></span><br><span class="line"><span class="comment"># 네트워크의 유닛의 일부만 동작하고 일부는 동작하지 않도록 하는 방법</span></span><br><span class="line"><span class="comment"># BatchNormalization - vanishing/exploding gradient 문제를 해결하기위해 사용</span></span><br><span class="line"><span class="comment"># Activation -  활성화 함수 tf.nn.relu또는 &quot;relu&quot;와 같은 내장 활성화 함수의 문자열 이름</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> Adam 	<span class="comment"># 1 차 및 2 차 모멘트의 적응 적 추정을 기반으로하는 확률 적 경사 하강 법</span></span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> backend <span class="keyword">as</span> K	<span class="comment"># 텐서 곱셈, 합성 곱 등의 저수준의 연산을 제공</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.client <span class="keyword">import</span> device_lib		<span class="comment"># Tensorflow가 내 GPU를 활용하고 있는지 확인</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lightgbm <span class="keyword">as</span> lgb	<span class="comment"># 트리 기반 학습 알고리즘을 사용하는 그라디언트 부스팅 프레임 워크</span></span><br><span class="line"><span class="keyword">import</span> catboost <span class="keyword">as</span> cb	<span class="comment"># 데이터에 범주형 변수 많을 때 유용한 모델</span></span><br><span class="line"><span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb	<span class="comment"># 분산 그라디언트 부스팅 라이브러리</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns	<span class="comment"># 통계 데이터 시각화 패키지</span></span><br><span class="line">sns.set_style(<span class="string">&quot;whitegrid&quot;</span>)	<span class="comment"># whitegrid 사용</span></span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_columns&#x27;</span>, <span class="literal">None</span>)  <span class="comment"># 최대 열수 설정</span></span><br><span class="line">pd.set_option(<span class="string">&#x27;display.max_rows&#x27;</span>, <span class="number">200</span>)  <span class="comment"># 출력 행수 설정</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)   <span class="comment"># 일치하는 경고를 인쇄하지 않습니다</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(device_lib.list_local_devices())</span><br><span class="line"></span><br><span class="line">config = tf.ConfigProto(device_count=&#123;<span class="string">&quot;CPU&quot;</span>: <span class="number">1</span>, <span class="string">&quot;GPU&quot;</span> : <span class="number">1</span>&#125;) <span class="comment"># tensorflow에 사용할 장비 설정</span></span><br><span class="line">session = tf.Session(config=config) <span class="comment"># tensorflow의 연산결과를 확인하기위한 변수</span></span><br><span class="line">K.set_session(session)  <span class="comment"># keras가 tensorflow의 세션을 사용할수 있도록</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>








<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 합치기</span></span><br><span class="line"><span class="comment">#test = pd.read_csv(r&quot;c:\work\dataset\titanic\test.csv&quot;, &quot;,&quot;)</span></span><br><span class="line"><span class="comment">#train = pd.read_csv(r&quot;c:\work\dataset\titanic\train.csv&quot;, &quot;,&quot;)</span></span><br><span class="line">test = pd.read_csv(<span class="string">&quot;../input/test.csv&quot;</span>, <span class="string">&quot;,&quot;</span>)    <span class="comment"># test파일 불러오기 (&quot;경로&quot;, &quot;문자열&quot;)</span></span><br><span class="line">train = pd.read_csv(<span class="string">&quot;../input/train.csv&quot;</span>, <span class="string">&quot;,&quot;</span>)  <span class="comment"># train파일 불러오기 (&quot;경로&quot;, &quot;문자열&quot;)</span></span><br><span class="line">test[<span class="string">&quot;is_test&quot;</span>] = <span class="literal">True</span>      <span class="comment"># test함수에 &quot;is_test&quot; 컬럼을 생성하고 내용은 전부 True 입력</span></span><br><span class="line">train[<span class="string">&quot;is_test&quot;</span>] = <span class="literal">False</span>    <span class="comment"># train함수에 &quot;is_test&quot; 컬럼을 생성하고 내용은 전부 Fales 입력 </span></span><br><span class="line"><span class="comment"># 13개의 컬럼을 가진 common 함수 생성</span></span><br><span class="line">common = pd.concat([test, train],axis=<span class="number">0</span>).loc[:,[<span class="string">&quot;PassengerId&quot;</span>, <span class="string">&quot;Survived&quot;</span>, <span class="string">&quot;is_test&quot;</span>, </span><br><span class="line">                                                <span class="string">&quot;Age&quot;</span>, <span class="string">&quot;Cabin&quot;</span>, <span class="string">&quot;Embarked&quot;</span>, </span><br><span class="line">                                                <span class="string">&quot;Fare&quot;</span>, <span class="string">&quot;Name&quot;</span>, <span class="string">&quot;Parch&quot;</span>, <span class="string">&quot;Pclass&quot;</span>, </span><br><span class="line">                                                <span class="string">&quot;Sex&quot;</span>, <span class="string">&quot;SibSp&quot;</span>, <span class="string">&quot;Ticket&quot;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># PassengerId : 순번						</span></span><br><span class="line"><span class="comment"># survived : 생존=1, 죽음=0</span></span><br><span class="line"><span class="comment"># pclass : 승객 등급. 1등급=1, 2등급=2, 3등급=3</span></span><br><span class="line"><span class="comment"># Name : 이름</span></span><br><span class="line"><span class="comment"># Sex : 성별</span></span><br><span class="line"><span class="comment"># Age : 나이</span></span><br><span class="line"><span class="comment"># sibsp : 함께 탑승한 형제 또는 배우자 수</span></span><br><span class="line"><span class="comment"># parch : 함께 탑승한 부모 또는 자녀 수</span></span><br><span class="line"><span class="comment"># ticket : 티켓 번호</span></span><br><span class="line"><span class="comment"># Fare : 티켓가격</span></span><br><span class="line"><span class="comment"># cabin : 선실 번호</span></span><br><span class="line"><span class="comment"># embarked : 탑승장소 S=Southhampton, C=Cherbourg, Q=Queenstown</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 중복 티켓 수 확인</span></span><br><span class="line">common[<span class="string">&quot;Ticket&quot;</span>].count() - <span class="built_in">len</span>(common[<span class="string">&quot;Ticket&quot;</span>].unique())</span><br><span class="line"></span><br></pre></td></tr></table></figure>












<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  train 데이터를 이용해 그룹화 / by=&quot;Ticket&quot; -&gt; &quot;Ticket&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;PassengerId&quot; : &#x27;count&#x27;, -&gt; Cabin의 값이 같은 &quot;PassengerId&quot; 의 수를 &#x27;count&#x27;해서(합) &quot;PassengerId&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># &quot;Sex&quot; : lambda x : x[x==&quot;female&quot;].count()&#125;) -&gt; &quot;female&quot; 일 경우 count()(합)의 값을 &quot;Sex&quot; 칼럼에 추가</span></span><br><span class="line">t = train.groupby(by=<span class="string">&quot;Ticket&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;PassengerId&quot;</span> : <span class="string">&#x27;count&#x27;</span>, <span class="string">&quot;Sex&quot;</span> : <span class="keyword">lambda</span> x : x[x==<span class="string">&quot;female&quot;</span>].count()&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># t 의컬럼을 &quot;Ticket&quot;, &quot;SameTicket&quot;, &quot;FemalesOnTicket&quot; 으로 변경</span></span><br><span class="line">t.columns = [<span class="string">&quot;Ticket&quot;</span>, <span class="string">&quot;SameTicket&quot;</span>, <span class="string">&quot;FemalesOnTicket&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 에다가 t 를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Ticket&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, t, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Ticket&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common데이터에 &quot;TicketDigits&quot; 컬럼을 생성하고 Ticket의 내용을 숫자로 변환해서 입력</span></span><br><span class="line"><span class="comment"># str.split(&quot; &quot;) -&gt; 공백으로 문자열을 나눔 / errors=&quot;coerce&quot; -&gt; 잘못된 구문은 NaN으로 설정</span></span><br><span class="line"><span class="comment"># .astype(np.str) -&gt; 문자형으로 변환 / .str.len() -&gt; 길이구하기</span></span><br><span class="line"><span class="comment"># 결과는 문자의 길이가 나옴</span></span><br><span class="line">common[<span class="string">&quot;TicketDigits&quot;</span>] = pd.to_numeric(common[<span class="string">&quot;Ticket&quot;</span>].<span class="built_in">str</span>.split(<span class="string">&quot; &quot;</span>).<span class="built_in">str</span>[-<span class="number">1</span>], errors=<span class="string">&quot;coerce&quot;</span>).astype(np.<span class="built_in">str</span>).<span class="built_in">str</span>.<span class="built_in">len</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 &quot;TicketIsNumber&quot; 칼럼 추가후 &quot;Ticket&quot; 의 내용을 추가</span></span><br><span class="line"><span class="comment"># .str.contains(&quot;[A-Za-z]&quot;, regex = True) -&gt; [A-Za-z] 포함여부 확인후 포함되어있다면 True값 반환</span></span><br><span class="line">common[<span class="string">&quot;TicketIsNumber&quot;</span>] = ~common[<span class="string">&quot;Ticket&quot;</span>].<span class="built_in">str</span>.contains(<span class="string">&quot;[A-Za-z]&quot;</span>, regex = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 &quot;FemalesPerTicketPart&quot; 컬럼 추가후 common[&quot;FemalesOnTicket&quot;]/common[&quot;SameTicket&quot;] 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;FemalesPerTicketPart&quot;</span>] = common[<span class="string">&quot;FemalesOnTicket&quot;</span>]/common[<span class="string">&quot;SameTicket&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>












<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*3 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"><span class="comment"># 막대그래프 생성</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;TicketDigits&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax=ax[<span class="number">0</span>])  <span class="comment"># &quot;TicketDigits&quot; 의 생존률</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;TicketIsNumber&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax = ax[<span class="number">1</span>])  <span class="comment">#  &quot;TicketIsNumber&quot; 의 생존률</span></span><br><span class="line"><span class="comment"># 산점도 그래프 생성</span></span><br><span class="line">sns.regplot(x=<span class="string">&quot;FemalesPerTicketPart&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax = ax[<span class="number">2</span>])  <span class="comment"># &quot;FemalesPerTicketPart&quot; 의 생존률</span></span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
















<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># str.contains - 지정한 문자열이 포함되어있는지 확인(있으면 True값을 반환)</span></span><br><span class="line"><span class="comment"># 중북이름 여부 컬럼 생성</span></span><br><span class="line">common[<span class="string">&quot;DoubleName&quot;</span>] = common[<span class="string">&quot;Name&quot;</span>].<span class="built_in">str</span>.contains(<span class="string">&quot;\(&quot;</span>)</span><br><span class="line"><span class="comment"># 이름길이 측정 컬럼 생성</span></span><br><span class="line">common[<span class="string">&quot;NameLen&quot;</span>] = common[<span class="string">&quot;Name&quot;</span>].<span class="built_in">str</span>.<span class="built_in">len</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>












<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*2 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">2</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"><span class="comment"># &quot;DoubleName&quot; 의 생존률 막대그래프 생성</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;DoubleName&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax=ax[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># &quot;NameLen&quot; 의 산점도 그래프 생성</span></span><br><span class="line">sns.regplot(x=<span class="string">&quot;NameLen&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax = ax[<span class="number">1</span>])</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>













<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># title 컬럼 생성( Miss, Mr등 )</span></span><br><span class="line">common[<span class="string">&quot;Title&quot;</span>] = common[<span class="string">&quot;Name&quot;</span>].<span class="built_in">str</span>.split(<span class="string">&quot;, &quot;</span>).<span class="built_in">str</span>[<span class="number">1</span>].<span class="built_in">str</span>.split(<span class="string">&quot; &quot;</span>).<span class="built_in">str</span>[<span class="number">0</span>]</span><br><span class="line">common.loc[common[<span class="string">&quot;Title&quot;</span>].<span class="built_in">str</span>[-<span class="number">1</span>]!=<span class="string">&quot;.&quot;</span>, <span class="string">&quot;Title&quot;</span>]=<span class="string">&quot;Bad&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 특이한 타이틀(Col, Major 등) 추출하기 </span></span><br><span class="line">rare_title = common[<span class="string">&quot;Title&quot;</span>].value_counts()[common[<span class="string">&quot;Title&quot;</span>].value_counts() &lt; <span class="number">5</span>].index</span><br><span class="line"></span><br><span class="line"><span class="comment"># 특이한 타이틀들을 Rare 로 변환하기</span></span><br><span class="line">common[<span class="string">&quot;Title&quot;</span>] = common[<span class="string">&quot;Title&quot;</span>].apply(<span class="keyword">lambda</span> x: <span class="string">&#x27;Rare&#x27;</span> <span class="keyword">if</span> x <span class="keyword">in</span> rare_title <span class="keyword">else</span> x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 타이틀별 생존률</span></span><br><span class="line">titletarget = common.groupby(by=<span class="string">&quot;Title&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># titletarget의 컬럼을 &quot;Title&quot;, &quot;TargetByTitle&quot; 로 변환</span></span><br><span class="line">titletarget.columns = [<span class="string">&quot;Title&quot;</span>, <span class="string">&quot;TargetByTitle&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 에다가 titletarget 를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Title&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, titletarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Title&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>














<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 9</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># title 별 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;Title&quot;</span>, y=<span class="string">&quot;TargetByTitle&quot;</span>, data=common)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>












<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Family 컬럼을 생성하고 Parch + SibSp + 1 의값을 넣음</span></span><br><span class="line">common[<span class="string">&quot;Family&quot;</span>] = common[<span class="string">&quot;Parch&quot;</span>] + common[<span class="string">&quot;SibSp&quot;</span>] + <span class="number">1</span></span><br><span class="line"><span class="comment"># Alone 컬럼을 생성하고 Family 가 1인 경우에 True 값을 넣고 그외엔 False를 넣음</span></span><br><span class="line">common[<span class="string">&quot;Alone&quot;</span>] = common[<span class="string">&quot;Family&quot;</span>] == <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>













<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train 데이터를 이용해 그룹화 / by=&quot;Cabin&quot; -&gt; Cabin의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;PassengerId&quot; : &#x27;count&#x27;&#125;) -&gt; Cabin의 값이 같은 &quot;PassengerId&quot; 의 수를 &#x27;count&#x27;해서(합) &quot;PassengerId&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 선실별로 인원수 구하기</span></span><br><span class="line">cap = train.groupby(by=<span class="string">&quot;Cabin&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;PassengerId&quot;</span> : <span class="string">&#x27;count&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cap의 컬럼을 &quot;Cabin&quot;, &quot;SameCabin&quot; 로 변경</span></span><br><span class="line">cap.columns = [<span class="string">&quot;Cabin&quot;</span>, <span class="string">&quot;SameCabin&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 cap 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Title&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, cap, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Cabin&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common데이터에 &quot;CabinNumber&quot; 컬럼을 생성하고 Cabin의 내용을 숫자로 변환해서 입력</span></span><br><span class="line"><span class="comment"># errors=&quot;coerce&quot; -&gt; 잘못된 구문은 NaN으로 설정</span></span><br><span class="line">common[<span class="string">&quot;CabinNumber&quot;</span>] = pd.to_numeric(common[<span class="string">&quot;Cabin&quot;</span>].<span class="built_in">str</span>[<span class="number">1</span>:], errors = <span class="string">&quot;coerce&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 &quot;CabinEven&quot; 컬럼을 생성후 &quot;CabinNumber&quot;값을 2로 나눈후 나머지값 입력(선실이 좌측인지 우측인지 구분)</span></span><br><span class="line">common[<span class="string">&quot;CabinEven&quot;</span>] = common[<span class="string">&quot;CabinNumber&quot;</span>] %<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;CabinsPerMan&quot; 컬럼을 생성후 &quot;Cabin&quot; 의내용을 가져와서 공백으로 문자열을 분리하고 문자열의 갯수를 입력</span></span><br><span class="line">common[<span class="string">&quot;CabinsPerMan&quot;</span>] = common[<span class="string">&quot;Cabin&quot;</span>].<span class="built_in">str</span>.split(<span class="string">&quot; &quot;</span>).<span class="built_in">str</span>.<span class="built_in">len</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;Deck&quot; 컬럼을 생성후 &quot;Cabin&quot; 의내용을 가져와서 첫글자에따라 순위를 매기고 nan값에는 -1을 입력</span></span><br><span class="line">common[<span class="string">&quot;Deck&quot;</span>] = common[<span class="string">&quot;Cabin&quot;</span>].<span class="built_in">str</span>[<span class="number">0</span>].rank().fillna(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;Deck&quot; -&gt; &quot;Deck&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; : &#x27;mean&#x27;&#125;) -&gt; &quot;Deck&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 선실 앞자리 글자별 평균생존률 구하기</span></span><br><span class="line">decktarget = common.groupby(by=<span class="string">&quot;Deck&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># decktarget의 컬럼을 &quot;Deck&quot;, &quot;TargetByDeck&quot; 로 변환</span></span><br><span class="line">decktarget.columns = [<span class="string">&quot;Deck&quot;</span>, <span class="string">&quot;TargetByDeck&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 decktarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Deck&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, decktarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Deck&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*3 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;Deck&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;Deck&quot;</span>, y=<span class="string">&quot;TargetByDeck&quot;</span>, data=common.sort_values(<span class="string">&quot;Deck&quot;</span>), ax=ax[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;CabinEven&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;CabinEven&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax=ax[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># &quot;CabinNumber&quot;의 생존률 산점도그래프</span></span><br><span class="line">sns.regplot(x=<span class="string">&quot;CabinNumber&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax=ax[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 13</span></span><br><span class="line"><span class="comment"># 연령별 성별별 생존률의 점이 겹치지 않는 범주 형 산점도 그래프</span></span><br><span class="line">sns.swarmplot(x=<span class="string">&quot;Survived&quot;</span>, y=<span class="string">&quot;Age&quot;</span>, hue=<span class="string">&quot;Sex&quot;</span>, palette=sns.color_palette([<span class="string">&quot;#20AFCF&quot;</span>,<span class="string">&quot;#cf4040&quot;</span>]), data=common)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 14</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pd.qcut(common[&#x27;Age&#x27;] -&gt; 동일한 갯수로 나눔 / fillna(common[&#x27;Age&#x27;] -&gt; nan에 &#x27;Age&#x27;의 평균값을 정수형으로 삽입</span></span><br><span class="line"><span class="comment"># &#x27;AgeGroup&#x27; 컬럼을 생성하고 &#x27;Age&#x27;의 내용을 6개의 연령대를 만들어서 연령대로 구분(-0.001 ~ 19 / 19 ~ 25 / 25 ~ 29 / 29 ~ 30 / 30 ~ 41 / 41 ~ 80 )해서 삽입하고 </span></span><br><span class="line"><span class="comment"># nan에는 평균값인 25 ~ 29가 들어감</span></span><br><span class="line">common[<span class="string">&#x27;AgeGroup&#x27;</span>] = pd.qcut(common[<span class="string">&#x27;Age&#x27;</span>].fillna(common[<span class="string">&#x27;Age&#x27;</span>].mean()).astype(<span class="built_in">int</span>), <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;AgeGroup&quot; -&gt; &quot;AgeGroup&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; :  &#x27;mean&#x27;&#125;) -&gt; &quot;AgeGroup&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 연령 그룹별 평균생존률</span></span><br><span class="line">agetarget = common.groupby(by=<span class="string">&quot;AgeGroup&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># agetarget의 컬럼을 &quot;AgeGroup&quot;, &quot;TargetByAgeGroup&quot;로 변환</span></span><br><span class="line">agetarget.columns = [<span class="string">&quot;AgeGroup&quot;</span>, <span class="string">&quot;TargetByAgeGroup&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 agetarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;AgeGroup&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, agetarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;AgeGroup&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;IsTinyChild&quot; 컬럼을 생성후 &quot;Age&quot; &lt;1 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;IsTinyChild&quot;</span>] = common[<span class="string">&quot;Age&quot;</span>]&lt;<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;IsChild&quot; 컬럼을 생성후  &quot;Age&quot; &lt;10 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;IsChild&quot;</span>] = common[<span class="string">&quot;Age&quot;</span>]&lt;<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;AverageAge&quot; 컬럼을 생성후 &quot;Age&quot; / &quot;Family&quot; 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;AverageAge&quot;</span>] = common[<span class="string">&quot;Age&quot;</span>] / common[<span class="string">&quot;Family&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*3 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;AgeGroup&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;AgeGroup&quot;</span>, y=<span class="string">&quot;TargetByAgeGroup&quot;</span>, data=common, ax = ax[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;IsChild&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;IsChild&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax = ax[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;AverageAge&quot;의 생존률 산점도그래프</span></span><br><span class="line">sns.regplot(x=<span class="string">&quot;AverageAge&quot;</span>, y=<span class="string">&quot;Survived&quot;</span>, data=common, ax = ax[<span class="number">2</span>])</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#x27;FareGroup&#x27; 컬럼을 생성하고 &#x27;Fare&#x27;의 값을 6개의 그룹으로 나눠서 삽입(-0.001 ~ 7.0 / 7.0 ~ 8.0 / 8.0 ~ 14.0 / 14.0 ~ 26.0 / 26.0 ~ 53.0 / 53.0 ~ 512.0)</span></span><br><span class="line"><span class="comment"># nan에는 &#x27;Fare&#x27; 값의 평균값을 정수로 삽입</span></span><br><span class="line">common[<span class="string">&#x27;FareGroup&#x27;</span>] = pd.qcut(common[<span class="string">&#x27;Fare&#x27;</span>].fillna(common[<span class="string">&#x27;Fare&#x27;</span>].mean()).astype(<span class="built_in">int</span>), <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;FareGroup&quot; -&gt; &quot;FareGroup&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; :  &#x27;mean&#x27;&#125;) -&gt; &quot;FareGroup&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 페어그룹별 평균 생존률</span></span><br><span class="line">faretarget = common.groupby(by=<span class="string">&quot;FareGroup&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># faretarget의 컬럼을 &quot;FareGroup&quot;, &quot;TargetByFareGroup&quot;로 변경</span></span><br><span class="line">faretarget.columns = [<span class="string">&quot;FareGroup&quot;</span>, <span class="string">&quot;TargetByFareGroup&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 faretarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;FareGroup&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, faretarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;FareGroup&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;AverageFareByFamily&quot; 컬럼을 생성후 &quot;Fare&quot; / &quot;Family&quot; 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;AverageFareByFamily&quot;</span>] = common[<span class="string">&quot;Fare&quot;</span>] / common[<span class="string">&quot;Family&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;AverageFareByTicket&quot; 컬럼을 생성후 &quot;Fare&quot; / &quot;SameTicket&quot; 값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;AverageFareByTicket&quot;</span>] = common[<span class="string">&quot;Fare&quot;</span>] / common[<span class="string">&quot;SameTicket&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;FareLog&quot; 컬럼을 생성후 &quot;Fare&quot; 의 로그값을 삽입</span></span><br><span class="line">common[<span class="string">&quot;FareLog&quot;</span>] = np.log(common[<span class="string">&quot;Fare&quot;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 17</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;FareGroup&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;FareGroup&quot;</span>, y=<span class="string">&quot;TargetByFareGroup&quot;</span>, data=common)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 18</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;Pclass&quot; -&gt;&quot;Pclass&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; :  &#x27;mean&#x27;&#125;) -&gt; &quot;Pclass&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 승객등급별 생존률 구하기</span></span><br><span class="line">pclasstarget = common.groupby(by=<span class="string">&quot;Pclass&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># pclasstarget의 컬럼을 &quot;Pclass&quot;, &quot;TargetByPclass&quot;로 변환</span></span><br><span class="line">pclasstarget.columns = [<span class="string">&quot;Pclass&quot;</span>, <span class="string">&quot;TargetByPclass&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 pclasstarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Pclass&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, pclasstarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Pclass&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;Embarked&quot; -&gt; &quot;Embarked&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; :  &#x27;mean&#x27;&#125;) -&gt; &quot;Embarked&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 탑승장소별로 생존률 구하기</span></span><br><span class="line">Embarkedtarget = common.groupby(by=<span class="string">&quot;Embarked&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Embarkedtarget의 컬럼을 &quot;Embarked&quot;, &quot;TargetByEmbarked&quot;로 변환</span></span><br><span class="line">Embarkedtarget.columns = [<span class="string">&quot;Embarked&quot;</span>, <span class="string">&quot;TargetByEmbarked&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 Embarkedtarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Embarked&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, Embarkedtarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Embarked&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터를 이용해 그룹화 / by=&quot;Sex&quot; -&gt; &quot;Sex&quot;의 값이 추가되고 / as_index=False -&gt; 인덱스 사용안함</span></span><br><span class="line"><span class="comment"># .agg(&#123;&quot;Survived&quot; :  &#x27;mean&#x27;&#125;) -&gt; &quot;Sex&quot;의 값이 같은 &quot;Survived&quot; 의 수를 &#x27;mean&#x27;해서(평균) &quot;Survived&quot; 에 추가 </span></span><br><span class="line"><span class="comment"># 성별별 생존률 구하기</span></span><br><span class="line">Sextarget = common.groupby(by=<span class="string">&quot;Sex&quot;</span>, as_index=<span class="literal">False</span>).agg(&#123;<span class="string">&quot;Survived&quot;</span> : <span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sextarget의 컬럼을 &quot;Sex&quot;, &quot;TargetBySex&quot;로 변환</span></span><br><span class="line">Sextarget.columns = [<span class="string">&quot;Sex&quot;</span>, <span class="string">&quot;TargetBySex&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># common 데이터에 Sextarget 데이터를 병합함(how=&quot;left&quot; -&gt; 왼쪽 프레임의 키만 사용 / on=&quot;Sex&quot; -&gt; 조인 할 열 또는 인덱스 수준 이름)</span></span><br><span class="line">common = pd.merge(common, Sextarget, how=<span class="string">&quot;left&quot;</span>, on=<span class="string">&quot;Sex&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>










<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 19</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*3 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">3</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;Pclass&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;Pclass&quot;</span>, y=<span class="string">&quot;TargetByPclass&quot;</span>, data=common, ax=ax[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;Embarked&quot;의 생존률 막대그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;Embarked&quot;</span>, y=<span class="string">&quot;TargetByEmbarked&quot;</span>, data=common, ax = ax[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># &quot;Sex&quot;의 생존률 산점도그래프</span></span><br><span class="line">sns.barplot(x=<span class="string">&quot;Sex&quot;</span>, y=<span class="string">&quot;TargetBySex&quot;</span>, data=common, ax = ax[<span class="number">2</span>])</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 사용할 모든 컬럼을 가진 allfeatures 변수 생성</span></span><br><span class="line">allfeatures = [</span><br><span class="line">    <span class="string">&quot;PassengerId&quot;</span>, </span><br><span class="line">    <span class="string">&quot;is_test&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Survived&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Age&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Fare&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Parch&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Pclass&quot;</span>,</span><br><span class="line">    <span class="string">&quot;SibSp&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Sex&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Embarked&quot;</span>, </span><br><span class="line">    <span class="string">&quot;SameTicket&quot;</span>, </span><br><span class="line">    <span class="string">&quot;FemalesOnTicket&quot;</span>, </span><br><span class="line">    <span class="string">&quot;SameCabin&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Deck&quot;</span>, </span><br><span class="line">    <span class="string">&quot;TargetByDeck&quot;</span>, </span><br><span class="line">    <span class="string">&quot;TargetByTitle&quot;</span>, </span><br><span class="line">    <span class="string">&quot;TargetByAgeGroup&quot;</span>, </span><br><span class="line">    <span class="string">&quot;TargetByFareGroup&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TargetByPclass&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TargetByEmbarked&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TargetBySex&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Title&quot;</span>, </span><br><span class="line">    <span class="string">&quot;CabinNumber&quot;</span>, </span><br><span class="line">    <span class="string">&quot;CabinEven&quot;</span>, </span><br><span class="line">    <span class="string">&quot;CabinsPerMan&quot;</span>, </span><br><span class="line">    <span class="string">&quot;DoubleName&quot;</span>, </span><br><span class="line">    <span class="string">&quot;NameLen&quot;</span>, </span><br><span class="line">    <span class="string">&quot;TicketDigits&quot;</span>,</span><br><span class="line">    <span class="string">&quot;TicketIsNumber&quot;</span>,</span><br><span class="line">    <span class="string">&quot;IsTinyChild&quot;</span>, </span><br><span class="line">    <span class="string">&quot;IsChild&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Alone&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Family&quot;</span>, </span><br><span class="line">    <span class="string">&quot;AverageAge&quot;</span>,</span><br><span class="line">    <span class="string">&quot;AverageFareByFamily&quot;</span>,</span><br><span class="line">    <span class="string">&quot;AverageFareByTicket&quot;</span>,</span><br><span class="line">    <span class="string">&quot;FemalesPerTicketPart&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># c변수를 생성하고 common데이터의 모든행과 allfeatures에 들어있는 열의 정보를 가져오도록 함</span></span><br><span class="line">c = common.loc[:, allfeatures]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 문자형 데이터인 &quot;Title&quot;, &quot;Embarked&quot;, &quot;Pclass&quot;, &quot;Sex&quot;를 수치형 데이터로 변환후 가변수화함</span></span><br><span class="line"><span class="comment"># 문자형 컬럼을 데이터 종류별로 컬럼을 만듬(title 을 Title_Dr.  Title_Master. 등으로) </span></span><br><span class="line"><span class="comment"># 문자형을 수치형으로 바꾸기만 했을경우 관계성으로 인한 학습에러를 방지하기위해 가변수화의 과정이 필요함</span></span><br><span class="line">c = pd.get_dummies(c, columns=[</span><br><span class="line">    <span class="string">&quot;Title&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Embarked&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Pclass&quot;</span>, </span><br><span class="line">    <span class="string">&quot;Sex&quot;</span></span><br><span class="line">])</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 21</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># .describe() -&gt; 데이터 요약 / .sort_values(&quot;count&quot;) -&gt; &quot;count&quot; 컬럼을 기준으로 정렬</span></span><br><span class="line">c.describe().T.sort_values(<span class="string">&quot;count&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>








<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 22</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># .iloc -&gt; 정수기반 인덱싱 / Imputer(strategy=&quot;most_frequent&quot;) -&gt; 결측치를 &quot;most_frequent&quot;(최빈값)으로 대체</span></span><br><span class="line"><span class="comment"># .fit_transform(c.iloc[:,3:]) -&gt; c.iloc[:,3:] 데이터의 계수추정과 자료변환 실행</span></span><br><span class="line">c.iloc[:,<span class="number">3</span>:] = Imputer(strategy=<span class="string">&quot;most_frequent&quot;</span>).fit_transform(c.iloc[:,<span class="number">3</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># dep변수에 &quot;is_test&quot;가 False인 &quot;Survived&quot;값 추가</span></span><br><span class="line">dep = c[c[<span class="string">&quot;is_test&quot;</span>] == <span class="literal">False</span>].loc[:, [<span class="string">&quot;Survived&quot;</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># indep변수에 &quot;is_test&quot;가 False인 자료들의 3열이후의(4열부터) 값들 추가</span></span><br><span class="line">indep = c[c[<span class="string">&quot;is_test&quot;</span>] == <span class="literal">False</span>].iloc[:, <span class="number">3</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># res변수에 &quot;is_test&quot;가 True인 자료들의 3열이후의(4열부터) 값들 추가</span></span><br><span class="line">res = c[c[<span class="string">&quot;is_test&quot;</span>] == <span class="literal">True</span>].iloc[:, <span class="number">3</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># res_index변수에 &quot;is_test&quot;가 True인 자료들의 &quot;PassengerId&quot; 값을 추가</span></span><br><span class="line">res_index = c[c[<span class="string">&quot;is_test&quot;</span>] == <span class="literal">True</span>].loc[:, <span class="string">&quot;PassengerId&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># .iloc -&gt; 정수기반 인덱싱 </span></span><br><span class="line"><span class="comment"># StandardScaler() -&gt; 평균을 제거하고 단위 분산으로 스케일링하여 기능 표준화</span></span><br><span class="line"><span class="comment"># .fit_transform(indep.iloc[:,3:]) -&gt; indep.iloc[:,3:] 데이터의 계수추정과 자료변환 실행</span></span><br><span class="line">indep.iloc[:,<span class="number">3</span>:] = StandardScaler().fit_transform(indep.iloc[:,<span class="number">3</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># StandardScaler() -&gt; 평균을 제거하고 단위 분산으로 스케일링하여 기능 표준화</span></span><br><span class="line"><span class="comment"># .fit_transform(res.iloc[:,3:]) -&gt; res.iloc[:,3:] 데이터의 계수추정과 자료변환 실행</span></span><br><span class="line">res.iloc[:,<span class="number">3</span>:] = StandardScaler().fit_transform(res.iloc[:,<span class="number">3</span>:])</span><br><span class="line"></span><br><span class="line"><span class="comment"># train_test_split -&gt; 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line"><span class="comment"># test_size=0.40 -&gt; float 인 경우 0.0에서 1.0 사이 여야하며 테스트 분할에 포함 할 데이터 세트의 비율, int 인 경우 테스트 샘플의 절대 수를 나타냄</span></span><br><span class="line"><span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">indep_train, indep_test, dep_train, dep_test = train_test_split(indep, dep, test_size=<span class="number">0.40</span>, random_state=<span class="number">47</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### Model 1. Keras MLP</span></span><br><span class="line"><span class="comment">### 23</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 수동으로 디바이스 배치하기 CPU 0번</span></span><br><span class="line"><span class="keyword">with</span> tf.device(<span class="string">&#x27;/device:CPU:0&#x27;</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 선형 레이어 구성 모델</span></span><br><span class="line">    gs1 = Sequential()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dense(45 -&gt; (*, 45) 형태의 배열을 출력</span></span><br><span class="line">    <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄) </span></span><br><span class="line">    <span class="comment"># input_dim=45 -&gt; (*, 45) 형태의 배열을 인풋으로 받음</span></span><br><span class="line">    gs1.add(Dense(<span class="number">45</span> ,activation=<span class="string">&#x27;linear&#x27;</span>, input_dim=<span class="number">45</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 학습성능을 높이기 위함 정규화</span></span><br><span class="line">    gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dense(9 -&gt; (*, 9) 형태의 배열을 출력</span></span><br><span class="line">    <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄)  </span></span><br><span class="line">    gs1.add(Dense(<span class="number">9</span>,activation=<span class="string">&#x27;linear&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 학습성능을 높이기 위함 정규화</span></span><br><span class="line">    gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Overfitting을 해소하기 위해사용 0.4 유닛을 드롭함</span></span><br><span class="line">    gs1.add(Dropout(<span class="number">0.4</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dense(5 -&gt; (*, 5) 형태의 배열을 출력</span></span><br><span class="line">    <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄) </span></span><br><span class="line">    gs1.add(Dense(<span class="number">5</span>,activation=<span class="string">&#x27;linear&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 학습성능을 높이기 위함 정규화</span></span><br><span class="line">    gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Overfitting을 해소하기 위해사용 0.2 유닛을 드롭함</span></span><br><span class="line">    gs1.add(Dropout(<span class="number">0.2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dense(5 -&gt; (*, 5) 형태의 배열을 출력</span></span><br><span class="line">    <span class="comment"># activation=&#x27;relu&#x27; -&gt; 활성화 함수 지정(&#x27;relu&#x27;=정류 된 선형 단위 활성화 함수)  </span></span><br><span class="line">    gs1.add(Dense(<span class="number">1</span>,activation=<span class="string">&#x27;relu&#x27;</span>, ))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 학습을 위한 모델 생성</span></span><br><span class="line">    <span class="comment"># optimizer=Adam -&gt; 컴파일을 위한 매개변수(Adam : 값을 예측할 경우 사용)</span></span><br><span class="line">    <span class="comment"># lr=0.001 -&gt; 0보다 크거나 같은 float 값. 학습률.</span></span><br><span class="line">    <span class="comment"># beta_1=0.9  -&gt; 0보다 크고 1보다 작은 float 값. 일반적으로 1에 가깝게 설정</span></span><br><span class="line">    <span class="comment"># beta_2=0.999  -&gt; 0보다 크고 1보다 작은 float 값. 일반적으로 1에 가깝게 설정</span></span><br><span class="line">    <span class="comment"># epsilon -&gt; 수치 식에 사용되는 fuzz factor의 값을 반환</span></span><br><span class="line">    <span class="comment"># decay -&gt; 0보다 크거나 같은 float 값. 업데이트마다 적용되는 학습률의 감소율</span></span><br><span class="line">    <span class="comment"># loss=&#x27;binary_crossentropy&#x27; -&gt; 이진 교차 엔트로피 손실을 계산</span></span><br><span class="line">    <span class="comment"># metrics=[&#x27;accuracy&#x27;] -&gt; 딥 러닝 모델의 성능을 평가하는 데 사용되는 함수(&#x27;accuracy&#x27;=예측이 레이블과 동일한 빈도를 계산)</span></span><br><span class="line">    gs1.<span class="built_in">compile</span>(optimizer=Adam(lr=<span class="number">0.001</span>, beta_1=<span class="number">0.9</span>, beta_2=<span class="number">0.999</span>, epsilon=<span class="number">1e-08</span>, decay=<span class="number">0</span>), loss=<span class="string">&#x27;binary_crossentropy&#x27;</span>, metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># fit -&gt; 데이터학습용 파라미터 입력</span></span><br><span class="line">    <span class="comment"># epochs -&gt; 정수. 모델을 학습시킬 세대의 수. 한 세대는 제공된 모든 x와 y 데이터에 대한 반복</span></span><br><span class="line">    <span class="comment"># batch_size -&gt; 정수 혹은 None. 몇 개의 샘플로 가중치를 갱신할 것인지 지정. 따로 지정하지 않으면 디폴트인 32가 적용</span></span><br><span class="line">    <span class="comment"># validation_data -&gt; 성능 평가용 데이터</span></span><br><span class="line">    <span class="comment"># verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">    gs1.fit(indep_train, dep_train, epochs=<span class="number">500</span>, batch_size=<span class="number">30</span>, validation_data=(indep_test,dep_test), verbose=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># # res를 기반으로 gs1 데이터셋 예측 수행()</span></span><br><span class="line">    g=gs1.predict_classes(res)[:,<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(accuracy_score(dep_test, gs1.predict_classes(indep_test)), accuracy_score(dep_train, gs1.predict_classes(indep_train)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>











<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 24</span></span><br><span class="line"></span><br><span class="line">cvscores = []   <span class="comment"># cvscore 리스트변수 생성</span></span><br><span class="line">data = pd.DataFrame()   <span class="comment"># data 데이터프레임 변수 생성</span></span><br><span class="line">i=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tensorflow에 사용할 디바이스 설정 CPU 0번 사용</span></span><br><span class="line"><span class="keyword">with</span> tf.device(<span class="string">&#x27;/device:CPU:0&#x27;</span>):</span><br><span class="line">    <span class="comment"># 교차검증을 위한 설정 StratifiedKFold -&gt; target에 속성값의 개수를 동일하게 가져감으로써 kfold 같이 데이터가 한곳으로 몰리는것을 방지</span></span><br><span class="line">    <span class="comment"># n_splits -&gt; 데이터 분할 수 / shuffle -&gt; 데이터를 분할할때마다 데이터를 섞을지 여부</span></span><br><span class="line">    <span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">    <span class="comment"># split(indep, dep.iloc[:,0]) -&gt; indep과 dep.iloc[:,0]로 분할 </span></span><br><span class="line">    <span class="comment"># dep.iloc[:,0] -&gt; dep의 [:,0]행 선택</span></span><br><span class="line">    <span class="keyword">for</span> train, test <span class="keyword">in</span> StratifiedKFold(n_splits=<span class="number">5</span>, shuffle=<span class="literal">True</span>, random_state=<span class="number">1</span>).split(indep, dep.iloc[:,<span class="number">0</span>]):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># indep의 재 인덱싱작업(train열의 형태로 모든행 입력)</span></span><br><span class="line">        X = indep.reindex().iloc[train,:]</span><br><span class="line">        <span class="comment"># dep의 재 인덱싱작업(train열의 형태로 첫번째행 입력)</span></span><br><span class="line">        Y = dep.reindex().iloc[train,<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># dep의 재 인덱싱작업(test열의 형태로 모든행 입력)</span></span><br><span class="line">        Xv = indep.reindex().iloc[test,:]</span><br><span class="line">        <span class="comment"># dep의 재 인덱싱작업(test열의 형태로 첫번째행 입력)</span></span><br><span class="line">        Yv = dep.reindex().iloc[test,<span class="number">0</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 선형 레이어 구성 모델</span></span><br><span class="line">        gs1 = Sequential()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Dense(45 -&gt; (*, 45) 형태의 배열을 출력</span></span><br><span class="line">        <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄) </span></span><br><span class="line">        <span class="comment"># input_dim=45 -&gt; (*, 45) 형태의 배열을 인풋으로 받음</span></span><br><span class="line">        gs1.add(Dense(<span class="number">45</span> ,activation=<span class="string">&#x27;linear&#x27;</span>, input_dim=<span class="number">45</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 학습성능을 높이기 위함 정규화</span></span><br><span class="line">        gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Dense(9 -&gt; (*, 9) 형태의 배열을 출력</span></span><br><span class="line">        <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄) </span></span><br><span class="line">        gs1.add(Dense(<span class="number">9</span>,activation=<span class="string">&#x27;linear&#x27;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 학습성능을 높이기 위함 정규화     </span></span><br><span class="line">        gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Overfitting을 해소하기 위해사용 0.4 유닛을 드롭함</span></span><br><span class="line">        gs1.add(Dropout(<span class="number">0.4</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Dense(5 -&gt; (*, 5) 형태의 배열을 출력</span></span><br><span class="line">        <span class="comment"># activation=&#x27;linear&#x27; -&gt; 활성화 함수지정(&#x27;linear&#x27;= 계산된 값을 그대로 출력으로 보냄) </span></span><br><span class="line">        gs1.add(Dense(<span class="number">5</span>,activation=<span class="string">&#x27;linear&#x27;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 학습성능을 높이기 위함 정규화    </span></span><br><span class="line">        gs1.add(BatchNormalization())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Overfitting을 해소하기 위해사용 0.2 유닛을 드롭함</span></span><br><span class="line">        gs1.add(Dropout(<span class="number">0.2</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Dense(5 -&gt; (*, 5) 형태의 배열을 출력</span></span><br><span class="line">        <span class="comment"># activation=&#x27;relu&#x27; -&gt; 활성화 함수 지정(&#x27;relu&#x27;=정류 된 선형 단위 활성화 함수)  </span></span><br><span class="line">        gs1.add(Dense(<span class="number">1</span>,activation=<span class="string">&#x27;relu&#x27;</span>, ))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 학습을 위한 모델 생성</span></span><br><span class="line">        <span class="comment"># optimizer=Adam -&gt; 컴파일을 위한 매개변수(Adam : 값을 예측할 경우 사용)</span></span><br><span class="line">        <span class="comment"># lr=0.001 -&gt; 0보다 크거나 같은 float 값. 학습률.</span></span><br><span class="line">        <span class="comment"># beta_1=0.9  -&gt; 0보다 크고 1보다 작은 float 값. 일반적으로 1에 가깝게 설정</span></span><br><span class="line">        <span class="comment"># beta_2=0.999  -&gt; 0보다 크고 1보다 작은 float 값. 일반적으로 1에 가깝게 설정</span></span><br><span class="line">        <span class="comment"># epsilon -&gt; 수치 식에 사용되는 fuzz factor의 값을 반환</span></span><br><span class="line">        <span class="comment"># decay -&gt; 0보다 크거나 같은 float 값. 업데이트마다 적용되는 학습률의 감소율</span></span><br><span class="line">        <span class="comment"># loss=&#x27;binary_crossentropy&#x27; -&gt; 이진 교차 엔트로피- 손실을 계산</span></span><br><span class="line">        <span class="comment"># metrics=[&#x27;accuracy&#x27;] -&gt; 딥 러닝 모델의 성능을 평가하는 데 사용되는 함수(&#x27;accuracy&#x27;=예측이 레이블과 동일한 빈도를 계산)    </span></span><br><span class="line">        gs1.<span class="built_in">compile</span>(optimizer=Adam(lr=<span class="number">0.001</span>, beta_1=<span class="number">0.9</span>, beta_2=<span class="number">0.999</span>, epsilon=<span class="number">1e-08</span>, decay=<span class="number">0</span>), loss=<span class="string">&#x27;binary_crossentropy&#x27;</span>, metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># fit -&gt; 데이터학습용 파라미터 입력</span></span><br><span class="line">        <span class="comment"># epochs -&gt; 정수. 모델을 학습시킬 세대의 수. 한 세대는 제공된 모든 x와 y 데이터에 대한 반복</span></span><br><span class="line">        <span class="comment"># batch_size -&gt; 정수 혹은 None. 몇 개의 샘플로 가중치를 갱신할 것인지 지정. 따로 지정하지 않으면 디폴트인 32가 적용</span></span><br><span class="line">        <span class="comment"># validation_data -&gt; 성능 평가용 데이터</span></span><br><span class="line">        <span class="comment"># verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">        gs1.fit(X, Y, epochs=<span class="number">500</span>, batch_size=<span class="number">30</span>, validation_data=(Xv, Yv), verbose=<span class="literal">False</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># res를 기반으로 gs1 데이터셋 예측 수행()</span></span><br><span class="line">        data[i] = gs1.predict_classes(res)[:,<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># evaluate -&gt; 테스트 모드에서의 모델의 손실 값과 측정항목 값을 반환</span></span><br><span class="line">        <span class="comment"># verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">        scores = gs1.evaluate(Xv, Yv, verbose=<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">print</span>(gs1.metrics_names[<span class="number">1</span>], scores[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># cvscores에 scores[1] 데이터 추가</span></span><br><span class="line">        cvscores.append(scores[<span class="number">1</span>])</span><br><span class="line">        i+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mlp_mean에 cvscores의 평균값 추가</span></span><br><span class="line">mlp_mean = np.mean(cvscores)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mlp_stdev에 cvscores의 표준편차값 추가</span></span><br><span class="line">mlp_stdev = np.std(cvscores)</span><br><span class="line"><span class="built_in">print</span>(mlp_mean, mlp_stdev)</span><br><span class="line"></span><br><span class="line"><span class="comment"># g에 data값의 행값들의 평균을 반올림한 값을 추가</span></span><br><span class="line">g = np.<span class="built_in">round</span>(data.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>












<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 25</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure 객체를 생성하고 1*3 subplot에 대응하는 Figure 객체와 Axes 객체의 리스트를 리턴 </span></span><br><span class="line"><span class="comment"># sharex=&#x27;col&#x27; -&gt; 각 서브 플롯 열은 x 축 또는 y 축을 공유</span></span><br><span class="line">fig, ax = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, sharex=<span class="string">&#x27;col&#x27;</span>, figsize=(<span class="number">20</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트제목 설정</span></span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Model accuracy history&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련 정확도 확인</span></span><br><span class="line">ax[<span class="number">0</span>].plot(gs1.history.history[<span class="string">&#x27;acc&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 검증 정확도 확인</span></span><br><span class="line">ax[<span class="number">0</span>].plot(gs1.history.history[<span class="string">&#x27;val_acc&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># y축 레이블 설정</span></span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">&#x27;Accuracy&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트의 범례 설정</span></span><br><span class="line">ax[<span class="number">0</span>].legend([<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;test&#x27;</span>], loc=<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트에 그리드 설정여부 기본은 False</span></span><br><span class="line">ax[<span class="number">0</span>].grid()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트제목 설정</span></span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Model loss history&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 훈련 손실값 확인</span></span><br><span class="line">ax[<span class="number">1</span>].plot(gs1.history.history[<span class="string">&#x27;loss&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 검증 손실값 확인</span></span><br><span class="line">ax[<span class="number">1</span>].plot(gs1.history.history[<span class="string">&#x27;val_loss&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># y축 라벨 설정</span></span><br><span class="line">ax[<span class="number">1</span>].set_ylabel(<span class="string">&#x27;Loss&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트의 범례 설정</span></span><br><span class="line">ax[<span class="number">1</span>].legend([<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;test&#x27;</span>], loc=<span class="string">&#x27;right&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 차트에 그리드 설정여부 기본은 False</span></span><br><span class="line">ax[<span class="number">1</span>].grid()</span><br><span class="line"></span><br><span class="line"><span class="comment"># x축 라벨 설정</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Epoch&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 26</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#result = pd.DataFrame(res_index.astype(np.int), columns=[&quot;PassengerId&quot;])</span></span><br><span class="line"><span class="comment">#result[&quot;Survived&quot;] = g.astype(np.int)</span></span><br><span class="line"><span class="comment">#result.to_csv(r&quot;c:\work\dataset\titanic\mlp.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"><span class="comment">#result.to_csv(&quot;mlp.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



















<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### Model 2. LightGBM</span></span><br><span class="line"><span class="comment">### 27</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of manual parameter tuning</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">for i in range(1,10):</span></span><br><span class="line"><span class="string">    params = &#123;&#125;</span></span><br><span class="line"><span class="string">    params[&quot;max_depth&quot;] = i</span></span><br><span class="line"><span class="string">    params[&quot;learning_rate&quot;] = 0.45</span></span><br><span class="line"><span class="string">    params[&quot;lambda_l1&quot;] = 0.1</span></span><br><span class="line"><span class="string">    params[&quot;lambda_l2&quot;] = 0.01</span></span><br><span class="line"><span class="string">    params[&quot;n_estimators&quot;] = 5000</span></span><br><span class="line"><span class="string">    params[&quot;n_jobs&quot;]=5 </span></span><br><span class="line"><span class="string">    params[&quot;objective&quot;] = &quot;binary&quot;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    params[&quot;boosting&quot;] = &quot;dart&quot;</span></span><br><span class="line"><span class="string">    params[&quot;colsample_bytree&quot;] = 0.9</span></span><br><span class="line"><span class="string">    params[&quot;subsample&quot;] =0.9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    train_data = lgb.Dataset(data=indep_train, label=dep_train, free_raw_data=False, feature_name = list(indep_train))</span></span><br><span class="line"><span class="string">    cv_result = lgb.cv(params, train_data, nfold=5, stratified=False, metrics=[&#x27;binary_error&#x27;], early_stopping_rounds=50)</span></span><br><span class="line"><span class="string">    print(i, 1-np.mean(cv_result[&quot;binary_error-mean&quot;]))</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 28</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># train_test_split -&gt; 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line"><span class="comment"># test_size=0.40 -&gt; float 인 경우 0.0에서 1.0 사이 여야하며 테스트 분할에 포함 할 데이터 세트의 비율, int 인 경우 테스트 샘플의 절대 수를 나타냄</span></span><br><span class="line"><span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">indep_train, indep_test, dep_train, dep_test = train_test_split(indep, dep, test_size=<span class="number">0.40</span>, random_state=<span class="number">47</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lgb.LGBMClassifier -&gt; 모델생성 </span></span><br><span class="line"><span class="comment"># max_depth = 7 -&gt; 기본 학습자의 최대 트리 깊이 7</span></span><br><span class="line"><span class="comment"># lambda_l1 / lambda_l2 -&gt; 정규화. 과적합을 방지할수 있지만, 정확도를 저하시킬수 있기때문에 일반적으로 디폴트값이 0을 사용</span></span><br><span class="line"><span class="comment"># learning_rate = 0.01 -&gt; 학습 스텝의 크기 /  n_estimators -&gt; 생성할 트리의 개수</span></span><br><span class="line"><span class="comment"># reg_alpha -&gt; 가중치에 대한 L1 정규화 항. 이 값을 늘리면 모델이 더 보수적이 됨</span></span><br><span class="line"><span class="comment"># colsample_bytree -&gt; 개별 의사결정나무 모형에 사용될 변수갯수를 지정. 보통 0.5 ~ 1 사용됨. 기본값 1</span></span><br><span class="line"><span class="comment"># subsample -&gt; 개별 의사결정나무 모형에 사용되는 임의 표본수를 지정. 보통 0.5 ~ 1 사용됨</span></span><br><span class="line"><span class="comment"># n_jobs -&gt; xgboost를 실행하는 데 사용되는 병렬 스레드 수. 그리드 검색과 같은 다른 Scikit-Learn 알고리즘과 함께 사용하는 경우 스레드를 병렬화하고 균형을 조정할 알고리즘을 선택할 수 있습니다. 스레드 경합을 만들면 두 알고리즘이 크게 느려집니다.</span></span><br><span class="line">gs1 = lgb.LGBMClassifier(max_depth = <span class="number">7</span>,</span><br><span class="line">                         lambda_l1 = <span class="number">0.1</span>,</span><br><span class="line">                         lambda_l2 = <span class="number">0.01</span>,</span><br><span class="line">                         learning_rate = <span class="number">0.01</span>, </span><br><span class="line">                         n_estimators = <span class="number">500</span>, reg_alpha = <span class="number">1.1</span>, colsample_bytree = <span class="number">0.9</span>, subsample = <span class="number">0.9</span>,</span><br><span class="line">                         n_jobs = <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># eval_set -&gt; 검증용 세트 지정 / verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line"><span class="comment"># eval_metric=&#x27;accuracy&#x27; -&gt; 딥 러닝 모델의 성능을 평가하는 데 사용되는 함수</span></span><br><span class="line"><span class="comment"># (&#x27;accuracy&#x27;=예측이 레이블과 동일한 빈도를 계산)  </span></span><br><span class="line"><span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정</span></span><br><span class="line">gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)], eval_metric=<span class="string">&#x27;accuracy&#x27;</span>, verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># res를 기반으로 gs1 데이터셋 예측 수행</span></span><br><span class="line">g = gs1.predict(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># accuracy_score -&gt; 부분 집합 정확도를 계산</span></span><br><span class="line">a = accuracy_score(dep_test, gs1.predict(indep_test))</span><br><span class="line">b = accuracy_score(dep_train, gs1.predict(indep_train))</span><br><span class="line"><span class="built_in">print</span>(a, b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>








<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 29</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># zip -&gt; indep.columns과 gs1의 feature_importances_(변수중요도)를 묶어줌 </span></span><br><span class="line">attr2 = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">zip</span>(indep.columns, gs1.feature_importances_) <span class="keyword">if</span> v&gt;<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 중요도가 낮은순으로 정렬</span></span><br><span class="line">attr2 = <span class="built_in">sorted</span>(attr2.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># x1과 y1에 attr2의 컬럼을 각각 분리해서 넣음</span></span><br><span class="line">x1,y1 = <span class="built_in">zip</span>(*attr2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">i1=<span class="built_in">range</span>(<span class="built_in">len</span>(x1))   <span class="comment"># range(0, 33) 컬럼의 갯수</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 새로운 피규어 생성</span></span><br><span class="line">plt.figure(num=<span class="literal">None</span>, figsize=(<span class="number">9</span>, <span class="number">7</span>), dpi=<span class="number">300</span>, facecolor=<span class="string">&#x27;w&#x27;</span>, edgecolor=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가로 막대그래프 생성</span></span><br><span class="line">plt.barh(i1, y1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 제목설정</span></span><br><span class="line">plt.title(<span class="string">&quot;LGBM&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># y축 눈금값 설정</span></span><br><span class="line">plt.yticks(i1, x1)</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>







<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 30</span></span><br><span class="line"></span><br><span class="line">model = []  <span class="comment"># model 리스트 변수 생성</span></span><br><span class="line">cvscores = []   <span class="comment"># cvscores 리스트 변수 생성</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">90</span>):   <span class="comment"># 90회 반복하며 학습함</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># train_test_split -&gt; 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line">    <span class="comment"># test_size=0.40 -&gt; float 인 경우 0.0에서 1.0 사이 여야하며 테스트 분할에 포함 할 데이터 세트의 비율, int 인 경우 테스트 샘플의 절대 수를 나타냄</span></span><br><span class="line">    <span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">    indep_train, indep_test, dep_train, dep_test = train_test_split(indep, dep, test_size=<span class="number">0.40</span>, random_state=i)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># lgb.LGBMClassifier -&gt; 모델생성 </span></span><br><span class="line">    <span class="comment"># max_depth = 7 -&gt; 기본 학습자의 최대 트리 깊이 7</span></span><br><span class="line">    <span class="comment"># lambda_l1 / lambda_l2 -&gt; 정규화. 과적합을 방지할수 있지만, 정확도를 저하시킬수 있기때문에 일반적으로 디폴트값이 0을 사용</span></span><br><span class="line">    <span class="comment"># learning_rate = 0.01 -&gt; 학습 스텝의 크기 </span></span><br><span class="line">    <span class="comment"># num_iterations -&gt; 나무를 반복하며 부스팅 하는데 몇번을 반복할것인가</span></span><br><span class="line">    <span class="comment"># n_estimators -&gt; 생성할 트리의 개수</span></span><br><span class="line">    <span class="comment"># reg_alpha -&gt; 가중치에 대한 L1 정규화 항. 이 값을 늘리면 모델이 더 보수적이 됨</span></span><br><span class="line">    <span class="comment"># colsample_bytree -&gt; 개별 의사결정나무 모형에 사용될 변수갯수를 지정. 보통 0.5 ~ 1 사용됨. 기본값 1</span></span><br><span class="line">    <span class="comment"># subsample -&gt; 개별 의사결정나무 모형에 사용되는 임의 표본수를 지정. 보통 0.5 ~ 1 사용됨</span></span><br><span class="line">    <span class="comment"># n_jobs -&gt; LightGBM을 실행하는 데 사용되는 병렬 스레드 수. </span></span><br><span class="line">    <span class="comment"># boosting=&#x27;dart&#x27; -&gt; 부스팅방법 &#x27;dart&#x27;는 딥러닝 드랍아웃을 사용하여 정확도를 중요시하는 방식</span></span><br><span class="line">    gs1 = lgb.LGBMClassifier(max_depth = <span class="number">7</span>,</span><br><span class="line">                             lambda_l1 = <span class="number">0.1</span>,</span><br><span class="line">                             lambda_l2 = <span class="number">0.01</span>,</span><br><span class="line">                             learning_rate =  <span class="number">0.01</span>, num_iterations=<span class="number">20000</span>,</span><br><span class="line">                             n_estimators = <span class="number">5000</span>, reg_alpha = <span class="number">1.1</span>, colsample_bytree = <span class="number">0.9</span>, subsample = <span class="number">0.9</span>,</span><br><span class="line">                             n_jobs = <span class="number">5</span>, boosting=<span class="string">&#x27;dart&#x27;</span> )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># eval_set -&gt; 검증용 세트 지정 </span></span><br><span class="line">    <span class="comment"># eval_metric=&#x27;accuracy&#x27; -&gt; 딥 러닝 모델의 성능을 평가하는 데 사용되는 함수</span></span><br><span class="line">    <span class="comment"># (&#x27;accuracy&#x27;=예측이 레이블과 동일한 빈도를 계산)  </span></span><br><span class="line">    <span class="comment"># verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">    <span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정                         </span></span><br><span class="line">    gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)], eval_metric=<span class="string">&#x27;accuracy&#x27;</span>, verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment"># model에 gs1데이터를 추가</span></span><br><span class="line">    model.append(gs1)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># cvscores에 accuracy_score -&gt; 부분 집합 정확도를 계산해서 추가</span></span><br><span class="line">    cvscores.append(accuracy_score(dep_test, gs1.predict(indep_test)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = pd.DataFrame()   <span class="comment"># data 데이터프레임 생성</span></span><br><span class="line">te = pd.DataFrame()     <span class="comment"># te 데이터 프레임 생성</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">90</span>):</span><br><span class="line">    <span class="comment"># res 데이터를 기반으로한 예측</span></span><br><span class="line">    data[i] = model[i].predict(res)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># indep_test 데이터를 기반으로한 예측    </span></span><br><span class="line">    te[i] = model[i].predict(indep_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># data의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">g = np.<span class="built_in">round</span>(data.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># te의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">t = np.<span class="built_in">round</span>(te.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 평균값</span></span><br><span class="line">lgb_mean = np.mean(cvscores)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 표준편차</span></span><br><span class="line">lgb_stdev = np.std(cvscores)</span><br><span class="line"><span class="built_in">print</span>(lgb_mean, lgb_stdev)</span><br><span class="line"></span><br></pre></td></tr></table></figure>








<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 31</span></span><br><span class="line"></span><br><span class="line">result = pd.DataFrame(res_index.astype(np.<span class="built_in">int</span>), columns=[<span class="string">&quot;PassengerId&quot;</span>])</span><br><span class="line">result[<span class="string">&quot;Survived&quot;</span>] = g.astype(np.<span class="built_in">int</span>)</span><br><span class="line">result.to_csv(<span class="string">&quot;lgbm.csv&quot;</span>, <span class="string">&quot;,&quot;</span>, index=<span class="literal">None</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



















<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### Model 3. CatBoost</span></span><br><span class="line"><span class="comment">### 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cb.CatBoostClassifier -&gt; 모델생성 </span></span><br><span class="line"><span class="comment"># depth -&gt; 기본 학습자의 최대 트리 깊이 </span></span><br><span class="line"><span class="comment"># reg_lambda -&gt; L2 정규화. 과적합을 방지할수 있지만, 정확도를 저하시킬수 있기때문에 일반적으로 디폴트값이 0을 사용</span></span><br><span class="line"><span class="comment"># learning_rate -&gt; 학습 스텝의 크기 </span></span><br><span class="line"><span class="comment"># iterations -&gt; 나무를 반복하며 부스팅 하는데 몇번을 반복할것인가</span></span><br><span class="line">gs1 = cb.CatBoostClassifier(depth = <span class="number">9</span>, reg_lambda=<span class="number">0.1</span>,</span><br><span class="line">                         learning_rate = <span class="number">0.09</span>, </span><br><span class="line">                         iterations = <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># eval_set -&gt; 검증용 세트 지정 </span></span><br><span class="line"><span class="comment"># verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line"><span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정                             </span></span><br><span class="line">gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)],  verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># res를 기반으로 gs1 데이터셋 예측 수행</span></span><br><span class="line">g = gs1.predict(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores에 accuracy_score -&gt; 부분 집합 정확도를 계산해서 추가</span></span><br><span class="line">a = accuracy_score(dep_test, gs1.predict(indep_test))</span><br><span class="line">b = accuracy_score(dep_train, gs1.predict(indep_train))</span><br><span class="line"><span class="comment">#cv = cross_val_score(gs1, indep_train, dep_train, cv=5)</span></span><br><span class="line"><span class="built_in">print</span>(a, b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>








<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 33</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># zip -&gt; indep.columns과 gs1의 feature_importances_(변수중요도)를 묶어줌 </span></span><br><span class="line">attr2 = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">zip</span>(indep.columns, gs1.feature_importances_) <span class="keyword">if</span> v&gt;<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 중요도가 낮은순으로 정렬</span></span><br><span class="line">attr2 = <span class="built_in">sorted</span>(attr2.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># x1과 y1에 attr2의 컬럼을 각각 분리해서 넣음</span></span><br><span class="line">x1,y1 = <span class="built_in">zip</span>(*attr2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">i1=<span class="built_in">range</span>(<span class="built_in">len</span>(x1))   <span class="comment"># range(0, 42) 컬럼의 갯수</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 새로운 피규어 생성</span></span><br><span class="line">plt.figure(num=<span class="literal">None</span>, figsize=(<span class="number">9</span>, <span class="number">8</span>), dpi=<span class="number">300</span>, facecolor=<span class="string">&#x27;w&#x27;</span>, edgecolor=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가로 막대그래프 생성</span></span><br><span class="line">plt.barh(i1, y1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 제목설정</span></span><br><span class="line">plt.title(<span class="string">&quot;CatBoost&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># y축 눈금값 설정</span></span><br><span class="line">plt.yticks(i1, x1)</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>






<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 34 </span></span><br><span class="line"></span><br><span class="line">model = []     <span class="comment"># model 리스트 변수 생성</span></span><br><span class="line">cvscores = []   <span class="comment"># cvscores 리스트 변수 생성</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">90</span>):  <span class="comment"># 90회 반복하며 학습함</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># train_test_split -&gt; 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line">    <span class="comment"># test_size=0.40 -&gt; float 인 경우 0.0에서 1.0 사이 여야하며 테스트 분할에 포함 할 데이터 세트의 비율, int 인 경우 테스트 샘플의 절대 수를 나타냄</span></span><br><span class="line">    <span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">    indep_train, indep_test, dep_train, dep_test = train_test_split(indep, dep, test_size=<span class="number">0.40</span>, random_state=i)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># cb.CatBoostClassifier -&gt; 모델생성 </span></span><br><span class="line">    <span class="comment"># depth -&gt; 기본 학습자의 최대 트리 깊이 </span></span><br><span class="line">    <span class="comment"># reg_lambda -&gt; L2 정규화. 과적합을 방지할수 있지만, 정확도를 저하시킬수 있기때문에 일반적으로 디폴트값이 0을 사용</span></span><br><span class="line">    <span class="comment"># learning_rate -&gt; 학습 스텝의 크기 </span></span><br><span class="line">    <span class="comment"># iterations -&gt; 나무를 반복하며 부스팅 하는데 몇번을 반복할것인가</span></span><br><span class="line">    gs1 = cb.CatBoostClassifier(depth = <span class="number">9</span>, reg_lambda=<span class="number">0.1</span>,</span><br><span class="line">                     learning_rate = <span class="number">0.09</span>, </span><br><span class="line">                     iterations = <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 데이터학습용 파라미터 입력</span></span><br><span class="line">    <span class="comment"># eval_set -&gt; 검증용 세트 지정 / verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">    <span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정                     </span></span><br><span class="line">    gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)],  verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    model.append(gs1)   <span class="comment"># gs1 데이터를 model에 삽입</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># accuracy_score -&gt; 부분 집합 정확도를 계산</span></span><br><span class="line">    <span class="comment"># 정확도 계산값을 cvscores에 삽입</span></span><br><span class="line">    cvscores.append(accuracy_score(dep_test, gs1.predict(indep_test)))</span><br><span class="line">    </span><br><span class="line">data = pd.DataFrame()   <span class="comment"># data 데이타 프레임생성</span></span><br><span class="line">te = pd.DataFrame()     <span class="comment"># te 데이타 프레임생성</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">90</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># res 데이터를 기반으로한 예측</span></span><br><span class="line">    data[i] = model[i].predict(res)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># indep_test 데이터를 기반으로한 예측</span></span><br><span class="line">    te[i] = model[i].predict(indep_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># data의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">g = np.<span class="built_in">round</span>(data.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># data의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">t = np.<span class="built_in">round</span>(te.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 평균값</span></span><br><span class="line">cb_mean = np.mean(cvscores)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 표준편차</span></span><br><span class="line">cb_stdev = np.std(cvscores)</span><br><span class="line"><span class="built_in">print</span>(cb_mean, cb_stdev)</span><br><span class="line"></span><br></pre></td></tr></table></figure>






<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 35</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#result = pd.DataFrame(res_index.astype(np.int), columns=[&quot;PassengerId&quot;])</span></span><br><span class="line"><span class="comment">#result[&quot;Survived&quot;] = g.astype(np.int)</span></span><br><span class="line"><span class="comment">#result.to_csv(r&quot;c:\work\dataset\titanic\catboost.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"><span class="comment">#result.to_csv(&quot;catboost.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>























<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### Model 4. XGBoost</span></span><br><span class="line"><span class="comment">### 36</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># xgb.XGBClassifier -&gt; 모델생성 </span></span><br><span class="line"><span class="comment"># max_depth = 9 -&gt; 기본 학습자의 최대 트리 깊이 9</span></span><br><span class="line"><span class="comment"># learning_rate = 0.01 -&gt; 학습 스텝의 크기 /  n_estimators -&gt; 생성할 트리의 개수</span></span><br><span class="line"><span class="comment"># reg_alpha -&gt; 가중치에 대한 L1 정규화 항. 이 값을 늘리면 모델이 더 보수적이 됨</span></span><br><span class="line"><span class="comment"># colsample_bytree -&gt; 개별 의사결정나무 모형에 사용될 변수갯수를 지정. 보통 0.5 ~ 1 사용됨. 기본값 1</span></span><br><span class="line"><span class="comment"># subsample -&gt; 개별 의사결정나무 모형에 사용되는 임의 표본수를 지정. 보통 0.5 ~ 1 사용됨</span></span><br><span class="line"><span class="comment"># n_jobs -&gt; xgboost를 실행하는 데 사용되는 병렬 스레드 수. 그리드 검색과 같은 다른 Scikit-Learn 알고리즘과 함께 사용하는 경우 스레드를 병렬화하고 균형을 조정할 알고리즘을 선택할 수 있습니다. 스레드 경합을 만들면 두 알고리즘이 크게 느려집니다.</span></span><br><span class="line">gs1 = xgb.XGBClassifier(max_depth = <span class="number">9</span>,</span><br><span class="line">                         learning_rate = <span class="number">0.01</span>, </span><br><span class="line">                         n_estimators = <span class="number">500</span>, reg_alpha = <span class="number">1.1</span>, colsample_bytree = <span class="number">0.9</span>, subsample = <span class="number">0.9</span>,</span><br><span class="line">                         n_jobs = <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터학습용 파라미터 입력</span></span><br><span class="line"><span class="comment"># eval_set -&gt; 검증용 세트 지정 / verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line"><span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정</span></span><br><span class="line">gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)],  verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># res를 기반으로 gs1 데이터셋 예측 수행</span></span><br><span class="line">g = gs1.predict(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># accuracy_score -&gt; 부분 집합 정확도를 계산</span></span><br><span class="line">a = accuracy_score(dep_test, gs1.predict(indep_test))</span><br><span class="line">b = accuracy_score(dep_train, gs1.predict(indep_train))</span><br><span class="line"><span class="built_in">print</span>(a, b)</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 37</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># zip -&gt; indep.columns과 gs1의 feature_importances_(변수중요도)를 묶어줌 </span></span><br><span class="line">attr2 = &#123;k: v <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">zip</span>(indep.columns, gs1.feature_importances_) <span class="keyword">if</span> v&gt;<span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 중요도가 낮은순으로 정렬</span></span><br><span class="line">attr2 = <span class="built_in">sorted</span>(attr2.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># x1과 y1에 attr2의 컬럼을 각각 분리해서 넣음</span></span><br><span class="line">x1,y1 = <span class="built_in">zip</span>(*attr2)</span><br><span class="line"></span><br><span class="line">i1=<span class="built_in">range</span>(<span class="built_in">len</span>(x1))   <span class="comment"># range(0, 35) 컬럼의 갯수</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 새로운 피규어 생성</span></span><br><span class="line">plt.figure(num=<span class="literal">None</span>, figsize=(<span class="number">9</span>, <span class="number">7</span>), dpi=<span class="number">300</span>, facecolor=<span class="string">&#x27;w&#x27;</span>, edgecolor=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 가로 막대그래프 생성</span></span><br><span class="line">plt.barh(i1, y1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 제목설정</span></span><br><span class="line">plt.title(<span class="string">&quot;XGBoost&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># y축 눈금값 설정</span></span><br><span class="line">plt.yticks(i1, x1)</span><br><span class="line">plt.show();</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 38</span></span><br><span class="line"></span><br><span class="line">model = []  <span class="comment"># model 리스트 변수 생성</span></span><br><span class="line">cvscores = [] <span class="comment"># cvscores 리스트 변수 생성</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">90</span>):  <span class="comment"># 90회 반복하며 학습함</span></span><br><span class="line">    <span class="comment"># train_test_split -&gt; 배열 또는 행렬을 임의 학습 및 테스트 하위 집합으로 분할</span></span><br><span class="line">    <span class="comment"># test_size=0.40 -&gt; float 인 경우 0.0에서 1.0 사이 여야하며 테스트 분할에 포함 할 데이터 세트의 비율, int 인 경우 테스트 샘플의 절대 수를 나타냄</span></span><br><span class="line">    <span class="comment"># random_state -&gt; 렌덤함수의 스피드(수치를 바꾸면 렌덤데이터를 추출하는 레코드값이 달라짐)</span></span><br><span class="line">    indep_train, indep_test, dep_train, dep_test = train_test_split(indep, dep, test_size=<span class="number">0.40</span>, random_state=i)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># xgb.XGBClassifier -&gt; 모델생성 </span></span><br><span class="line">    <span class="comment"># max_depth -&gt; 기본 학습자의 최대 트리 깊이 / reg_lambda -&gt; 가중치에 대한 L2 정규화 항. 이 값을 늘리면 모델이 더 보수적이 됨</span></span><br><span class="line">    <span class="comment"># learning_rate -&gt; 학습 스텝의 크기 /  n_estimators -&gt; 생성할 트리의 개수</span></span><br><span class="line">    <span class="comment"># reg_alpha -&gt; 가중치에 대한 L1 정규화 항. 이 값을 늘리면 모델이 더 보수적이 됨</span></span><br><span class="line">    <span class="comment"># colsample_bytree -&gt; 개별 의사결정나무 모형에 사용될 변수갯수를 지정. 보통 0.5 ~ 1 사용됨. 기본값 1</span></span><br><span class="line">    <span class="comment"># subsample -&gt; 개별 의사결정나무 모형에 사용되는 임의 표본수를 지정. 보통 0.5 ~ 1 사용됨</span></span><br><span class="line">    <span class="comment"># n_jobs -&gt; xgboost를 실행하는 데 사용되는 병렬 스레드 수. 그리드 검색과 같은 다른 Scikit-Learn 알고리즘과 함께 사용하는 경우 스레드를 병렬화하고 균형을 조정할 알고리즘을 선택할 수 있습니다. 스레드 경합을 만들면 두 알고리즘이 크게 느려집니다.</span></span><br><span class="line">    gs1 = xgb.XGBClassifier(max_depth = <span class="number">7</span>, reg_lambda = <span class="number">0.02</span>,</span><br><span class="line">                         learning_rate = <span class="number">0.01</span>, </span><br><span class="line">                         n_estimators = <span class="number">5000</span>, reg_alpha = <span class="number">1.1</span>, colsample_bytree = <span class="number">0.9</span>, subsample = <span class="number">0.9</span>,</span><br><span class="line">                         n_jobs = <span class="number">5</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 데이터학습용 파라미터 입력</span></span><br><span class="line">    <span class="comment"># eval_set -&gt; 검증용 세트 지정 / verbose -&gt; 평가단계에서 인쇄여부 1=true 매번인쇄, 100=100회 반복마다 인쇄</span></span><br><span class="line">    <span class="comment"># early_stopping_rounds -&gt; 조기 중단을 위한 라운드를 설정</span></span><br><span class="line">    gs1.fit(indep_train, dep_train, eval_set=[(indep_test, dep_test)], verbose=<span class="literal">False</span>, early_stopping_rounds=<span class="number">50</span>);</span><br><span class="line">    </span><br><span class="line">    model.append(gs1)   <span class="comment"># gs1 데이터를 model에 삽입</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># accuracy_score -&gt; 부분 집합 정확도를 계산</span></span><br><span class="line">    <span class="comment"># 정확도 계산값을 cvscores에 삽입</span></span><br><span class="line">    cvscores.append(accuracy_score(dep_test, gs1.predict(indep_test)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = pd.DataFrame()   <span class="comment"># data 데이타 프레임생성</span></span><br><span class="line">te = pd.DataFrame()   <span class="comment"># te 데이타 프레임생성</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">90</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># res 데이터를 기반으로한 예측</span></span><br><span class="line">    data[i] = model[i].predict(res)</span><br><span class="line">    <span class="comment"># indep_test 데이터를 기반으로한 예측</span></span><br><span class="line">    te[i] = model[i].predict(indep_test)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># data의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">g = np.<span class="built_in">round</span>(data.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># te의 데이터중 행의 평균값을 구하고 반올림</span></span><br><span class="line">t = np.<span class="built_in">round</span>(te.mean(axis=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 평균값</span></span><br><span class="line">xgb_mean = np.mean(cvscores)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cvscores 데이터의 표준편차</span></span><br><span class="line">xgb_stdev = np.std(cvscores)</span><br><span class="line"><span class="built_in">print</span>(xgb_mean, xgb_stdev)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 39</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#result = pd.DataFrame(res_index.astype(np.int), columns=[&quot;PassengerId&quot;])</span></span><br><span class="line"><span class="comment">#result[&quot;Survived&quot;] = g.astype(np.int)</span></span><br><span class="line"><span class="comment">#result.to_csv(r&quot;c:\work\dataset\titanic\xgb.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"><span class="comment">#result.to_csv(&quot;lgbm.csv&quot;, &quot;,&quot;, index=None)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### 40</span></span><br><span class="line"></span><br><span class="line">d = &#123;<span class="string">&#x27;Model&#x27;</span>:[<span class="string">&quot;Keras MLP&quot;</span>, <span class="string">&quot;LightGBM&quot;</span>, <span class="string">&quot;CatBoost&quot;</span>, <span class="string">&quot;XGBoost&quot;</span>], </span><br><span class="line">     <span class="string">&#x27;Mean accuracy&#x27;</span>: [mlp_mean, lgb_mean, cb_mean, xgb_mean], </span><br><span class="line">     <span class="string">&#x27;Std. Dev.&#x27;</span>: [mlp_stdev, lgb_stdev, cb_stdev, xgb_stdev],</span><br><span class="line">    <span class="string">&#x27;Leaderboard&#x27;</span>: [<span class="number">0.77033</span>, <span class="number">0.82296</span>, <span class="number">0.78947</span>, <span class="number">0.77511</span>]&#125;</span><br><span class="line">pd.DataFrame(data=d, columns=[<span class="string">&quot;Model&quot;</span>, <span class="string">&quot;Mean accuracy&quot;</span>, <span class="string">&quot;Std. Dev.&quot;</span>, <span class="string">&quot;Leaderboard&quot;</span>]).sort_values(<span class="string">&quot;Mean accuracy&quot;</span>, ascending=<span class="literal">False</span>).head(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/diablo.jpg" alt="LDH"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">LDH</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">102</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">40</p></a></div></div></nav></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://github.com/ldhjj77" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">MY Git Hub</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Error/"><span class="level-start"><span class="level-item">Error</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/HEXO/"><span class="level-start"><span class="level-item">HEXO</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Markdown/"><span class="level-start"><span class="level-item">Markdown</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Plotly/"><span class="level-start"><span class="level-item">Plotly</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile" href="/categories/Tableau/"><span class="level-start"><span class="level-item">Tableau</span></span><span class="level-end"><span class="level-item tag">48</span></span></a></li><li><a class="level is-mobile" href="/categories/%ED%8F%AC%ED%8A%B8%ED%8F%B4%EB%A6%AC%EC%98%A4/"><span class="level-start"><span class="level-item">포트폴리오</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-09-01T05:46:59.074Z">2021-09-01</time></p><p class="title"><a href="/2021/09/01/hello-world/">Hello World</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-27T08:00:00.000Z">2021-08-27</time></p><p class="title"><a href="/2021/08/27/project_md/Tableau/T051_%EB%B6%84%EC%82%B0%ED%98%95%EC%B0%A8%ED%8A%B8_%EA%B5%AD%EA%B0%80%EB%B3%84%EC%97%B0%EA%B0%84%ED%9D%90%EB%A6%84/">T051_분산형차트_국가별연간흐름</a></p><p class="categories"><a href="/categories/Tableau/">Tableau</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-27T06:00:00.000Z">2021-08-27</time></p><p class="title"><a href="/2021/08/27/project_md/Tableau/T050_LAST%ED%95%A8%EC%88%98_%EC%B5%9C%EA%B7%BCN%EA%B0%9C%EC%9B%94%EB%A7%A4%EC%B6%9C/">T050_LAST함수_최근N개월매출</a></p><p class="categories"><a href="/categories/Tableau/">Tableau</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-27T05:00:00.000Z">2021-08-27</time></p><p class="title"><a href="/2021/08/27/project_md/Tableau/T049_%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%97%B0%EA%B2%B0_Union_%EC%9D%B4%EC%9D%B5%EA%B3%BC%ED%95%A0%EC%9D%B8_%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84/">T049_데이터연결_Union_이익과할인_상관관계</a></p><p class="categories"><a href="/categories/Tableau/">Tableau</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-27T03:00:00.000Z">2021-08-27</time></p><p class="title"><a href="/2021/08/27/project_md/Tableau/T048_LAST%ED%95%A8%EC%88%98%ED%99%9C%EC%9A%A9_%EB%A7%88%EC%A7%80%EB%A7%89%EB%82%A0%EC%A7%9C%EA%B8%B0%EC%A4%80_%EC%84%B1%EC%9E%A5%EC%9C%A8/">T048_LAST함수활용_마지막날짜기준_성장율</a></p><p class="categories"><a href="/categories/Tableau/">Tableau</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">52</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/A/"><span class="tag">A</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/B/"><span class="tag">B</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BeautifulSoup/"><span class="tag">BeautifulSoup</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CatBoost/"><span class="tag">CatBoost</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/E/"><span class="tag">E</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Keras/"><span class="tag">Keras</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LightGBM/"><span class="tag">LightGBM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Module/"><span class="tag">Module</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PDF/"><span class="tag">PDF</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PPT/"><span class="tag">PPT</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tableau/"><span class="tag">Tableau</span><span class="tag">52</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XGBoost/"><span class="tag">XGBoost</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/chart-studio/"><span class="tag">chart_studio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/class/"><span class="tag">class</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/error/"><span class="tag">error</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/exception/"><span class="tag">exception</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/for/"><span class="tag">for</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/info/"><span class="tag">info</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/inheritance/"><span class="tag">inheritance</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggle/"><span class="tag">kaggle</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/md/"><span class="tag">md</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pandas/"><span class="tag">pandas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pycaret/"><span class="tag">pycaret</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/re/"><span class="tag">re</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/selenium/"><span class="tag">selenium</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/time/"><span class="tag">time</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/titanic/"><span class="tag">titanic</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/translator/"><span class="tag">translator</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webdriver/"><span class="tag">webdriver</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EA%B8%B0%EB%8A%A5/"><span class="tag">기능</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%B0%EC%97%B4%EC%83%9D%EC%84%B1/"><span class="tag">배열생성</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%B0%EC%97%B4%EC%9D%B8%EC%87%84/"><span class="tag">배열인쇄</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B2%94%EC%9A%A9%ED%95%A8%EC%88%98/"><span class="tag">범용함수</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%8A%AC%EB%9D%BC%EC%9D%B4%EC%8B%B1/"><span class="tag">슬라이싱</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC/"><span class="tag">예외처리</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%98%A4%EB%9D%BC%ED%81%B4/"><span class="tag">오라클</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9D%B8%EB%8D%B1%EC%8B%B1/"><span class="tag">인덱싱</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%81%AC%EB%A1%A4%EB%A7%81/"><span class="tag">크롤링</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%BC%EC%83%9D%EC%84%B1/"><span class="tag">파일생성</span><span class="tag">3</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/diablo.jpg" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2021 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "classic",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>